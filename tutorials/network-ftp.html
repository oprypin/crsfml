<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>File transfers with FTP | CrSFML Tutorials</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.2.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
    

        
    
    
    
    <link rel="prev" href="./network-http.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="6.4" data-basepath="." data-revision="Thu Aug 20 2015 14:16:31 GMT+0300 (EEST)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
            
            <li>
                <a href="http://github.com/BlaXpirit/crsfml" target="blank" class="custom-link">CrSFML</a>
            </li>
        
        

        
        <li class="divider"></li>
        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" >
            
            <span><b>1.</b> Getting started</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="start-vc.html">
            
                
                    <a href="./start-vc.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        SFML and Visual Studio
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="start-cb.html">
            
                
                    <a href="./start-cb.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        SFML and Code::Blocks (MinGW)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="start-linux.html">
            
                
                    <a href="./start-linux.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        SFML and Linux
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="start-osx.html">
            
                
                    <a href="./start-osx.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        SFML and Xcode (Mac OS X)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="compile-with-cmake.html">
            
                
                    <a href="./compile-with-cmake.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        Compiling SFML with CMake
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" >
            
            <span><b>2.</b> System module</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="system-time.html">
            
                
                    <a href="./system-time.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Handling time
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="system-thread.html">
            
                
                    <a href="./system-thread.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Threads
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="system-stream.html">
            
                
                    <a href="./system-stream.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        User data streams
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" >
            
            <span><b>3.</b> Window module</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="window-window.html">
            
                
                    <a href="./window-window.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Opening and managing an SFML window
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="window-events.html">
            
                
                    <a href="./window-events.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Events explained
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="window-inputs.html">
            
                
                    <a href="./window-inputs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Keyboard, mouse and joysticks
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="window-opengl.html">
            
                
                    <a href="./window-opengl.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Using OpenGL in a SFML window
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" >
            
            <span><b>4.</b> Graphics module</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="graphics-draw.html">
            
                
                    <a href="./graphics-draw.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Drawing 2D stuff
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="graphics-sprite.html">
            
                
                    <a href="./graphics-sprite.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Sprites and textures
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="graphics-text.html">
            
                
                    <a href="./graphics-text.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Text and fonts
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="graphics-shape.html">
            
                
                    <a href="./graphics-shape.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Shapes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="graphics-vertex-array.html">
            
                
                    <a href="./graphics-vertex-array.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Designing your own entities with vertex arrays
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="graphics-transform.html">
            
                
                    <a href="./graphics-transform.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        Position, rotation, scale: transforming entities
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="graphics-shader.html">
            
                
                    <a href="./graphics-shader.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                        Adding special effects with shaders
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="graphics-view.html">
            
                
                    <a href="./graphics-view.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                        Controlling the 2D camera with views
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" >
            
            <span><b>5.</b> Audio module</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="audio-sounds.html">
            
                
                    <a href="./audio-sounds.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Playing sounds and music
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="audio-recording.html">
            
                
                    <a href="./audio-recording.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Recording audio
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="audio-streams.html">
            
                
                    <a href="./audio-streams.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Custom audio streams
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="audio-spatialization.html">
            
                
                    <a href="./audio-spatialization.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Spatialization: Sounds in 3D
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" >
            
            <span><b>6.</b> Network module</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="network-socket.html">
            
                
                    <a href="./network-socket.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Communication using sockets
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="network-packet.html">
            
                
                    <a href="./network-packet.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Using and extending packets
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="network-http.html">
            
                
                    <a href="./network-http.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Web requests with HTTP
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="6.4" data-path="network-ftp.html">
            
                
                    <a href="./network-ftp.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                        File transfers with FTP
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >CrSFML Tutorials</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="file-transfers-with-ftp">File transfers with FTP</h1>
<h2 id="ftp-for-dummies">FTP for dummies</h2>
<p>If you know what FTP is, and just want to know how to use the FTP class that SFML provides, you can skip this section. </p>
<p>FTP (<em>File Transfer Protocol</em>) is a simple protocol that allows manipulation of files and directories on a remote server. The protocol consists of commands such as &quot;create directory&quot;, &quot;delete file&quot;, &quot;download file&quot;, etc. You can&apos;t send FTP commands to any remote computer, it needs to have an FTP server running which can understand and execute the commands that clients send. </p>
<p>So what can you do with FTP, and how can it be helpful to your program? Basically, with FTP you can access existing remote file systems, or even create your own. This can be useful if you want your network game to download resources (maps, images, ...) from a server, or your program to update itself automatically when it&apos;s connected to the internet. </p>
<p>If you want to know more about the FTP protocol, the <a href="http://en.wikipedia.org/wiki/File_Transfer_Protocol" title="FTP on wikipedia" target="_blank">Wikipedia article</a> provides more detailed information than this short introduction. </p>
<h2 id="the-ftp-client-class">The FTP client class</h2>
<p>The class provided by SFML is <a href="http://blaxpirit.github.io/crsfml/api/SF/Ftp.html" target="_blank">Ftp</a> (surprising, isn&apos;t it?). It&apos;s a client, which means that it can connect to an FTP server, send commands to it and upload or download files. </p>
<p>Every function of the <a href="http://blaxpirit.github.io/crsfml/api/SF/Ftp.html" target="_blank">Ftp</a> class wraps an FTP command, and returns a standard FTP response. An FTP response contains a status code (similar to HTTP status codes but not identical), and a message that informs the user of what happened. FTP responses are encapsulated in the <a href="http://blaxpirit.github.io/crsfml/api/SF/Ftp::Response.html" target="_blank">Ftp::Response</a> class. </p>
<pre><code>#include &lt;SFML/Network.hpp&gt;

sf::Ftp ftp;
...
sf::Ftp::Response response = ftp.login(); // just an example, could be any function

std::cout &lt;&lt; &quot;Response status: &quot; &lt;&lt; response.getStatus() &lt;&lt; std::endl;
std::cout &lt;&lt; &quot;Response message: &quot; &lt;&lt; response.getMessage() &lt;&lt; std::endl;
</code></pre><p>The status code can be used to check whether the command was successful or failed: Codes lower than 400 represent success, all others represent errors. You can use the <code>isOk()</code> function as a shortcut to test a status code for success. </p>
<pre><code>sf::Ftp::Response response = ftp.login();
if (response.isOk())
{
    // success!
}
else
{
    // error...
}
</code></pre><p>If you don&apos;t care about the details of the response, you can check for success with even less code: </p>
<pre><code>if (ftp.login().isOk())
{
    // success!
}
else
{
    // error...
}
</code></pre><p>For readability, these checks won&apos;t be performed in the following examples in this tutorial. Don&apos;t forget to perform them in your code! </p>
<p>Now that you understand how the class works, let&apos;s have a look at what it can do. </p>
<h2 id="connecting-to-the-ftp-server">Connecting to the FTP server</h2>
<p>The first thing to do is connect to an FTP server. </p>
<pre><code>sf::Ftp ftp;
ftp.connect(&quot;ftp.myserver.org&quot;);
</code></pre><p>The server address can be any valid <a href="http://blaxpirit.github.io/crsfml/api/SF/IpAddress.html" target="_blank">IpAddress</a>: A URL, an IP address, a network name, ... </p>
<p>The standard port for FTP is 21. If, for some reason, your server uses a different port, you can specify it as an additional argument: </p>
<pre><code>sf::Ftp ftp;
ftp.connect(&quot;ftp.myserver.org&quot;, 45000);
</code></pre><p>You can also pass a third parameter, which is a time out value. This prevents you from having to wait forever (or at least a very long time) if the server doesn&apos;t respond. </p>
<pre><code>sf::Ftp ftp;
ftp.connect(&quot;ftp.myserver.org&quot;, 21, sf::seconds(5));
</code></pre><p>Once you&apos;re connected to the server, the next step is to authenticate yourself: </p>
<pre><code>// authenticate with name and password
ftp.login(&quot;username&quot;, &quot;password&quot;);

// or login anonymously, if the server allows it
ftp.login();
</code></pre><h2 id="ftp-commands">FTP commands</h2>
<p>Here is a short description of all the commands available in the <a href="http://blaxpirit.github.io/crsfml/api/SF/Ftp.html" target="_blank">Ftp</a> class. Remember one thing: All these commands are performed relative to the <em>current working directory</em>, exactly as if you were executing file or directory commands in a console on your operating system. </p>
<p>Getting the current working directory: </p>
<pre><code>sf::Ftp::DirectoryResponse response = ftp.getWorkingDirectory();
if (response.isOk())
    std::cout &lt;&lt; &quot;Current directory: &quot; &lt;&lt; response.getDirectory() &lt;&lt; std::endl;
</code></pre><p><a href="http://blaxpirit.github.io/crsfml/api/SF/Ftp::DirectoryResponse.html" target="_blank">Ftp::DirectoryResponse</a> is a specialized <a href="http://blaxpirit.github.io/crsfml/api/SF/Ftp::Response.html" target="_blank">Ftp::Response</a> that also contains the requested directory. </p>
<p>Getting the list of directories and files contained in the current directory: </p>
<pre><code>sf::Ftp::ListingResponse response = ftp.getDirectoryListing();
if (response.isOk())
{
    const std::vector&lt;std::string&gt;&amp; listing = response.getListing();
    for (std::vector&lt;std::string&gt;::const_iterator it = listing.begin(); it != listing.end(); ++it)
        std::cout &lt;&lt; &quot;- &quot; &lt;&lt; *it &lt;&lt; std::endl;
}

// you can also get the listing of a sub-directory of the current directory:
response = ftp.getDirectoryListing(&quot;subfolder&quot;);
</code></pre><p><a href="http://blaxpirit.github.io/crsfml/api/SF/Ftp::ListingResponse.html" target="_blank">Ftp::ListingResponse</a> is a specialized <a href="http://blaxpirit.github.io/crsfml/api/SF/Ftp::Response.html" target="_blank">Ftp::Response</a> that also contains the requested directory/file names. </p>
<p>Changing the current directory: </p>
<pre><code>ftp.changeDirectory(&quot;path/to/new_directory&quot;); // the given path is relative to the current directory
</code></pre><p>Going to the parent directory of the current one: </p>
<pre><code>ftp.parentDirectory();
</code></pre><p>Creating a new directory (as a child of the current one): </p>
<pre><code>ftp.createDirectory(&quot;name_of_new_directory&quot;);
</code></pre><p>Deleting an existing directory: </p>
<pre><code>ftp.deleteDirectory(&quot;name_of_directory_to_delete&quot;);
</code></pre><p>Renaming an existing file: </p>
<pre><code>ftp.renameFile(&quot;old_name.txt&quot;, &quot;new_name.txt&quot;);
</code></pre><p>Deleting an existing file: </p>
<pre><code>ftp.deleteFile(&quot;file_name.txt&quot;);
</code></pre><p>Downloading (receiving from the server) a file: </p>
<pre><code>ftp.download(&quot;remote_file_name.txt&quot;, &quot;local/destination/path&quot;, sf::Ftp::Ascii);
</code></pre><p>The last argument is the transfer mode. It can be either Ascii (for text files), Ebcdic (for text files using the EBCDIC character set) or Binary (for non-text files). The Ascii and Ebcdic modes can transform the file (line endings, encoding) during the transfer to match the client environment. The Binary mode is a direct byte-for-byte transfer. </p>
<p>Uploading (sending to the server) a file: </p>
<pre><code>ftp.upload(&quot;local_file_name.pdf&quot;, &quot;remote/destination/path&quot;, sf::Ftp::Binary);
</code></pre><p>FTP servers usually close connections that are inactive for a while. If you want to avoid being disconnected, you can send a no-op command periodically: </p>
<pre><code>ftp.keepAlive();
</code></pre><h2 id="disconnecting-from-the-ftp-server">Disconnecting from the FTP server</h2>
<p>You can close the connection with the server at any moment with the <code>disconnect</code> function. </p>
<pre><code>ftp.disconnect();
</code></pre>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./network-http.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Web requests with HTTP"><i class="fa fa-angle-left"></i></a>
        
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
